/*!
 * AMDR <Asynchronous Module Define & Require>
 * (c) 2012 Shen Junru. MIT License.
 * http://github.com/xfsn/amdr
 */
(function(b,u,N){var i=b.document,l=am("head")||am("script"),a=i.createElement("script"),ao="onload",G="onerror",y=ao in a,Y=G in a,H=!y,ac={},O={interactive:ac,loaded:1,complete:1},Q={},an={},af={},E=H?{}:[],M=new o(),ae=/\s*,\s*/g,U=/^\s+|\s+$/g,ad=/^\S+(?:\s*|\s+\S+\s*)\(([^\)]*)\)[\s\S]+$/,I=/\/\*([\s\S]*?)\*\/|\/\/(.*)$/mg,ak=/\s*\((['"])([^'"\(]+)\1\)/.source,c=/^\/|^[^:]+:\/\//,k=/^\.?\.\//,L=/\?|\.js$/,z=/\/\.\//g,T=/(\/?)[^\/]*$/,R=/\/$/,ap=/\?/,ah=/\.\.?/,j="/",p="require,exports,module",r=Object.prototype.hasOwnProperty,F=Array.prototype.indexOf||function(ar,au){var at=this.length;au=au?(au<0?Math.max(0,at+au):au):0;for(;au<at;au++){if(au in this&&ar===this[au]){return au}}return -1};if(H){ao="onreadystatechange"}H=u||H;function K(ar){return ar instanceof Array}function C(ar){return"function"===typeof ar}function t(ar){return"string"===typeof ar}function aa(ar){return"object"===typeof ar}function s(av,au){if(au){var ar,at;for(ar in au){if(r.call(au,ar)){at=au[ar];if(K(at)){at=at.concat()}else{if(aa(at)){at=s(s({},av[ar]),at)}}av[ar]=at}}}return av}function V(ar){return new Error(ar)}function q(){return V("already fulfilled")}function am(ar){return i.getElementsByTagName(ar)[0]}function al(at){var ar=i.createElement("script");at.padding=false;Q[at.id]=ar;if(H){E[at.id]=[]}ar[ao]=y?function(au){if("load"===au.type){f(at,ar)}}:function(){if(O[ar.readyState]){f(at,ar)}};if(Y){ar[G]=function(){f(at,ar,V("module load failure"))}}ar.charset="utf-8";ar.async=ar.defer=true;ar.type="text/javascript";ar.src=at.url;l.appendChild(ar)}function f(av,at,au){at[ao]="";if(Y){at[G]=""}delete Q[av.id];if(au){av.reject(au)}else{var aw,ar=E;if(H){ar=ar[av.id]}while(ar.length){aw=ar.shift();aw.push(av);X.apply(b,aw)}if(H){delete ar[av.id]}if(!av.defined){av.defined=true;av.resolve()}}}function e(){}function o(at){var ar=this;ar.config={};ar.urlBase="";ar.urlArgs="";ar.pathNow=at||"";ar.pathMap={};ar.timeout=7}(e.prototype=o.prototype).clone=function(){var ar=new e();s(ar,this);return ar};function ai(at){var au=this,ar=new n();au.resolve=ar.resolve;au.reject=ar.reject;au.promise=ar.promise;au.config=at;au.rejected=false;au.requires={};au.exports=N;au.module=N}ai.prototype.getModule=function(ar,at){var au=(at?at+"!":"")+ar;return af[au]||(af[au]=new P(au,ar,this.config))};function P(aw,au,at){var av=this,ar=new n();at=at.clone();at.pathNow=au.replace(T,"$1");av.resolve=ar.resolve;av.reject=ar.reject;av.promise=ar.promise;av.context=new ai(at);av.defined=false;av.padding=true;av.id=aw;av.name=au;av.url=w(au,at)}function S(ar){this.then=ar}S.prototype.always=function(ar){return this.then(ar,ar)};function n(){var at=this,ay=new S(),av=[],au=[],ax="pending",aw=function(aC,aB,aA){var az=at;if(aC||aB){az=new n();av.push(function(aD){aD.then(aC,aB).then(az.resolve,az.reject)})}if(C(aA)){au.push(aA)}return az.promise},ar=function(aB){var aA,az;aB=d(aB);aw=aB.then;for(aA=0,az=av.length;aA<az;aA++){av[aA](aB)}ar=av=N;return aB};at.promise=ay;at.then=ay.then=function(aB,aA,az){return aw(aB,aA,az)};at.resolve=function(az){if(ar){ax="resolved";return ar(az)}throw q()};at.reject=function(az){if(ar){ax="rejected";return ar(ag(az))}throw q()};at.notify=function(aB){var aA,az;if(ar){for(aA=0,az=au.length;aA<az;aA++){au[aA](aB)}}throw q()};at.state=function(){return ax}}function d(ar){if(ar instanceof S){return ar}else{return x(ar)}}function x(ar){return new S(function(au){try{return d(au?au(ar):ar)}catch(at){return ag(at)}})}function ag(ar){return new S(function(av,au){try{return au?d(au(ar)):ag(ar)}catch(at){return ag(at)}})}function aj(ar,av,au,at){return d(ar).then(av,au,at)}function w(au,at,av){var ar=au;if(!L.test(ar)){ar+=(av||".js")}if(at.urlBase&&!c.test(au)){ar=at.urlBase+ar}if(at.urlArgs){ar+=(ap.test(ar)?"&":"?")+at.urlArgs}return ar}function D(at){do{at=at.replace(z,j)}while(at.indexOf("/./")>-1);var ar,au=1,av=at.split(j);while(0<(ar=F.call(av,"..",au))){ah.test(av[ar-=1])?au++:av.splice(ar,2)}return av.join(j)}function m(at,ar){if(!at){return at}if(!c.test(at)){if(!k.test(at)){var aw=ar.pathMap,ax=at.split(j),au,av;for(au=ax.length;au>0;au--){av=ax.slice(0,au).join(j);if(r.call(aw,av)){if(av=aw[av]){ax.splice(0,au,av)}else{ax.splice(0,au)}break}}at=ax.join(j)}else{at=ar.pathNow+at}if(0===at.indexOf("./")){at=at.substring(2)}}return D(at)}function aq(au,at){var ar=au?au.indexOf("!"):-1,av;if(-1!==ar){av=au.substring(0,ar);au=au.substring(ar+1,au.length)}else{au=m(au,at)}if(av){av=m(av,at)}return{prefix:av,name:au}}function v(ar){for(ar in Q){if(ac===O[Q[ar].readyState]){return af[ar]}}}function B(aw,at){var au=[],ay=0,av,ax;while(-1<(ay=F.call(aw,"require",ay))){if(N===av){av=String(at).replace(I,"");ax=av.replace(ad,"$1").replace(U,"").split(ae)}av.replace(new RegExp(ax[ay]+ak,"g"),ar);ay++}return au;function ar(az,aB,aA){if(aA){au.push(aA)}return az}}function h(at,ar,ay){if(ar in an){return x(an[ar](at)).then(aA)}var av=aq(ar,at.config),ax=av.prefix,au,aB,aC,az;ar=av.name;if(N===ax){au=at.getModule(ar);aC=au.promise;if(au.padding){al(au)}}else{aB=new n();aC=aB.promise;if(ax){az=at.getModule(ax);az.promise.then(function(aD){if(aD&&aD.load){if(aD.normalize){ar=aD.normalize(ar,function(aE){return m(aE,at.config)})}else{ar=m(ar,at.config)}au=at.getModule(ar,ax);au.promise.then(aB.resolve,aB.reject);if(!au.ready){aD.load(ar,au.resolve,au.reject)}}else{aB.reject(V('"load" method undefined.'))}},aB.reject)}else{aB.reject(V("empty loader name."))}}return aC.then(aA,aw);function aA(aD){return{index:ay,exports:aD}}function aw(aD){if(!at.rejected){at.rejected=true;throw aD}}}function ab(au,aw,aF){var ay=[],az=true,ax=aw.length,aD=false,aC,av,aB,ar;if(aF&&aF.length){aw=aw.concat(aF)}if(aB=av=aw.length){ay.length=ax;for(aC=0;az&&aC<av;aC++){if(ar=aw[aC]){h(au,ar,aC<ax?aC:ar).then(aE,aA)}}setTimeout(at,1000*au.config.timeout)}else{au.resolve(ay)}return au.promise;function aE(aG){(t(aG.index)?au.requires:ay)[aG.index]=aG.exports;if(0===--aB&&!aD){aD=true;au.resolve(ay)}}function aA(aG){az=false;if(!aD){aD=true;au.reject(aG)}}function at(){if(!aD){aD=true;au.reject(V("context timeout."))}}}function X(at,ax,aw,ar,av){var au=av.context;at=m(at,au.config);if(at&&at!==av.id){av=au.getModule(at);au=av.context}if(av.defined){return}av.defined=true;av.padding=false;ab(au,ax,aw).then(az,ay);function az(aA){try{var aB=ar.apply(b,aA)}catch(aC){av.reject(aC)}av.resolve(au.exports||aB)}function ay(aA){av.reject(aA)}}function W(ax,az,av){var ar=arguments.length,ay=p,aA,at,aw,au;if(2===ar){if(t(ax)){at=ax}else{ay=ax}av=az}else{if(1===ar){av=ax}else{if(3===ar){at=ax;ay=az}}}if(C(av)){if(p===ay&&!av.length){ay=""}ay=ay&&String(ay).replace(U,"");ay=ay?ay.split(ae):[];aw=av;if(aw.length){aA=B(ay,aw)}}else{ay=[];aw=function(){return av}}if(H){au=v();E[au.id].push([at,ay,aA,aw])}else{E.push([at,ay,aA,aw])}}W.amd={version:"%VERSION%"};function g(ar,aw,av){ar=String(ar).replace(U,"").split(ae);var at=new ai(M),au;if(C(aw)){au=B(ar,aw)}else{aw=N}return ab(at,ar,au).then(function(ax){return aw&&aw.apply(b,ax)},av)}g.config=function(at){if(at){var ar=at.urlBase,av=at.pathMap,au;if(ar&&!R.test(ar)){at.urlBase+="/"}if(av){for(au in av){av[au]=D(av[au].replace(R,""))}}s(M,at)}return M};function Z(ar){return function(at){return ar.requires[at]}}function J(ar){return ar.exports||(ar.exports={})}function A(ar){return ar.module||(ar.module={exports:J(ar),config:function(){return ar.config.config},toUrl:function(av,au){au=au||ar.config;var at=av.lastIndexOf("."),aw="";if(-1!==at){av=av.substring(0,at);aw=av.substring(at,av.length)}av=m(av,au);return w(av,au,aw)}})}an.require=Z;an.exports=J;an.module=A;an.isIE=function(){return u};an.Promise=function(){return S};an.Deferred=function(){return n};S.resolve=d;S.resolved=x;S.rejected=ag;S.when=aj;b.define=W;b.require=g}(this,/*@cc_on!@*/!1));