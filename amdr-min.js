/*! AMDR 1.0b2 (sha1: 80efc35251f711d05606c4469c0da95d29e79ee8) | (c) 2012 Shen Junru. MIT License. | http://github.com/shenjunru/amdr */
(function(t,n,r){"use strict";function B(e){return e instanceof Array}function j(e){return"function"==typeof e}function F(e){return"string"==typeof e}function I(e){return"object"==typeof e}function q(e,t){if(t){var n,r;for(n in t)P.call(t,n)&&(r=t[n],B(r)?r=r.concat():I(r)&&(r=q(q({},e[n]),r)),e[n]=r)}return e}function R(t,n){console&&(console.error||console.log).call(console,n||t.stack||e.stacktrace||t)}function U(e,t){var n=new Error(e.message);return!0!==t&&y.debug&&R(n,e),n}function z(){return U({message:"promise fulfilled.",emitter:"deferred"},!0)}function W(e){return i.getElementsByTagName(e)[0]}function X(e,t,n){var r=i.createElement("script");e.padding=!1,d[e.name]=r,c&&(g[e.name]=[]),r[u]=l?function(){V(e,r)}:function(){p[r.readyState]&&V(e,r)},r[a]=function(){V(e,r,U({message:"load failure.",parent:t,source:e.name}))},r.charset="utf-8",r.async=r.defer=!0,r.type="text/javascript",r.src=n||it(e.name,e.context.config),s.appendChild(r)}function V(e,n,r){n[a]=n[u]="",delete d[e.name];if(r)e.reject(r);else{var i,s=g;c&&(s=s[e.name]);while(s.length)i=s.shift(),i.push(e),ht.apply(t,i);c&&delete s[e.name],e.defined||(e.defined=!0,e.resolve())}}function $(){}function J(e){var t=this;t.config={},t.urlBase="",t.urlArgs="",t.pathNow=e||"",t.pathMap={},t.timeout=7,t.debug=!1}function K(e){var t=this,n=new Y;t.resolve=n.resolve,t.reject=n.reject,t.promise=n.promise,t.config=e,t.rejected=!1,t.requires={},t.exports=r,t.module=r}function Q(e,t){var n=this,r=new Y;t=t.clone(),t.pathNow=e.replace(L,"$1"),n.resolve=r.resolve,n.reject=r.reject,n.promise=r.promise,n.context=new K(t),n.defined=!1,n.padding=!0,n.name=e}function G(e){this.then=e}function Y(){var e=this,t=new G,n=[],i=[],s="pending",o=function(t,r,s){var o=e;if(t||r)o=new Y,n.push(function(e){e.then(t,r).then(o.resolve,o.reject)});return j(s)&&i.push(s),o.promise},u=function(e){var t,i;e=Z(e),o=e.then;for(t=0,i=n.length;t<i;t++)n[t](e);return u=n=r,e};e.promise=t,e.then=t.then=function(e,t,n){return o(e,t,n)},e.resolve=function(e){if(u)return s="resolved",u(e);throw z()},e.reject=function(e){if(u)return s="rejected",u(tt(e));throw z()},e.notify=function(e){if(!u)throw z();for(var t=0,n=i.length;t<n;t++)i[t](e)},e.state=function(){return s}}function Z(e){return e instanceof G?e:et(e)}function et(e){return new G(function(t){try{return Z(t?t(e):e)}catch(n){return tt(n)}})}function tt(e){return new G(function(t,n){try{return n?Z(n(e)):tt(e)}catch(r){return tt(r)}})}function nt(e,t,n,r){return Z(e).then(t,n,r)}function rt(e,t){var n=e.lastIndexOf("."),r="";return-1!==n&&(r=e.substring(n,e.length),e=e.substring(0,n)),e=ot(e,t),it(e,t,r)}function it(e,t,n){var r=e;return C.test(r)||(r+=n||".js"),t.urlBase&&!T.test(e)&&(r=t.urlBase+r),t.urlArgs&&(r+=(O.test(r)?"&":"?")+t.urlArgs),r}function st(e){do e=e.replace(k,_);while(e.indexOf("/./")>-1);var t,n=1,r=e.split(_);while(0<(t=H.call(r,"..",n)))M.test(r[t-=1])?n++:r.splice(t,2);return r.join(_)}function ot(e,t){if(!e)return e;if(!T.test(e)){if(!N.test(e)){var n=t.pathMap,r,i,s;if(n){r=e.split(_);for(s=r.length;s>0;s--){i=r.slice(0,s).join(_);if(P.call(n,i)){(i=n[i])?r.splice(0,s,i):r.splice(0,s);break}}e=r.join(_)}}else t.pathNow&&(e=t.pathNow+e);0===e.indexOf("./")&&(e=e.substring(2))}return st(e)}function ut(e,t){var n=e?e.indexOf("!"):-1,r;return-1!==n&&(r=e.substring(n+1,e.length),e=e.substring(0,n)),{name:ot(e,t),pipe:r}}function at(e){for(e in d)if(h===p[d[e].readyState])return m[e]}function ft(e,t){function u(e,t,r){return r&&n.push(r),e}var n=[],i=0,s,o;while(-1<(i=H.call(e,"require",i)))r===s&&(s=String(t).replace(S,""),o=s.replace(E,"$1").replace(w,"").split(b)),s.replace(new RegExp(o[i]+x,"g"),u),i++;return n}function lt(e,t,n,i){function h(e){return{index:n,exports:e}}function p(t){if(!e.rejected)throw e.rejected=!0,t}if(t in v)return et(v[t](e)).then(h);var s=isNaN(n)&&n,o=ut(t,e.config),u=o.name,a=o.pipe,f,l,c;return u?(f=e.getModule(u),l=f.promise,r!==a&&(c=new Y,l.then(function(n){n&&n.load?(n.normalize?a=n.normalize(a,function(t){return ot(t,e.config)}):a=ot(a,e.config),lt(e,a,n,i).then(c.resolve,c.reject)):c.reject(U({message:'"load()" undefined.',parent:i,source:t}))},c.reject),l=c.promise),s?(f.padding&&(f.padding=!1,s.load(u,{resolve:f.resolve,reject:f.reject,config:function(){return f.context.config},load:function(e){X(f,i,e)},toUrl:function(e,t){return rt(e,t||this.config())}})),l):(f.padding&&X(f,i),l.then(h,p))):tt(U({message:"module name empty.",parent:i,source:t})).then(p)}function ct(e,t,n,r){function h(t){(F(t.index)?e.requires:i)[t.index]=t.exports,0===--l&&!u&&(u=!0,e.resolve(i))}function p(t){s=!1,u||(u=!0,e.reject(t))}function d(){u||(u=!0,e.reject(U({message:"execute timeout.",parent:r,source:"context"})))}var i=[],s=!0,o=t.length,u=!1,a,f,l,c;n&&n.length&&(t=t.concat(n));if(l=f=t.length){i.length=o;for(a=0;s&&a<f;a++)(c=t[a])&&lt(e,c,a<o?a:c,r).then(h,p);setTimeout(d,1e3*e.config.timeout)}else e.resolve(i);return e.promise}function ht(e,n,i,s,o){function a(e){try{var n=s.apply(t,e),i=u.exports,a=u.module;a=a&&a.exports}catch(f){R(f),o.reject(f)}r!==a&&i!==a?n=a:r===n&&i&&(n=i),o.resolve(n)}function f(e){o.reject(e)}var u=o.context;e=ot(e,u.config),e&&e!==o.name&&(o=u.getModule(e),u=o.context);if(o.defined)return;o.defined=!0,o.padding=!1,ct(u,n,i,o.name).then(a,f)}function pt(e,t,n){var r=arguments.length,i=D,s,o,u,a;2===r?(F(e)?o=e:i=e,n=t):1===r?n=e:3===r&&(o=e,i=t),j(n)?(D===i&&!n.length&&(i=""),i=i&&String(i).replace(w,""),i=i?i.split(b):[],u=n,u.length&&(s=ft(i,u))):(i=[],u=function(){return n}),c?(a=at(),g[a.name].push([o,i,s,u])):g.push([o,i,s,u])}function dt(e,n,i){e=String(e).replace(w,"").split(b);var s=new K(y),o;return j(n)?o=ft(e,n):n=r,ct(s,e,o,"require").then(function(e){return n&&n.apply(t,e)},i)}function vt(e){return function(t){return e.requires[t]}}function mt(e){return e.exports||(e.exports={})}function gt(e){return e.module||(e.module={exports:mt(e),config:function(){return e.config.config},toUrl:function(t,n){return rt(t,n||e.config)}})}var i=t.document,s=W("head")||W("script"),o=i.createElement("script"),u="onload",a="onerror",f="readyState",l=u in o||!(f in o),c=!l,h={},p={interactive:h,loaded:1,complete:1},d={},v={},m={},g=c?{}:[],y=new J,b=/\s*,\s*/g,w=/^\s+|\s+$/g,E=/^\S+(?:\s*|\s+\S+\s*)\(([^\)]*)\)[\s\S]+$/,S=/\/\*([\s\S]*?)\*\/|\/\/(.*)$/mg,x=/\s*\((['"])([^'"\(]+)\1\)/.source,T=/^\/|^[^:]+:\/\//,N=/^\.?\.\//,C=/\?|\.js$/,k=/\/\.\//g,L=/(\/?)[^\/]*$/,A=/\/$/,O=/\?/,M=/\.\.?/,_="/",D="require,exports,module",P=Object.prototype.hasOwnProperty,H=Array.prototype.indexOf||function(e,t){var n=this.length;t=t?t<0?Math.max(0,n+t):t:0;for(;t<n;t++)if(t in this&&e===this[t])return t;return-1};c&&(u="onreadystatechange"),c=n||c,($.prototype=J.prototype).clone=function(){var e=new $;return q(e,this),e},K.prototype.getModule=function(e){return m[e]||(m[e]=new Q(e,this.config))},G.prototype.always=function(e){return this.then(e,e)},pt.amd={version:"%VERSION%",jQuery:!0},dt.config=function(e){if(e){var t=e.urlBase,n=e.pathMap,r;t&&!A.test(t)&&(e.urlBase+="/");if(n)for(r in n)n[r]=st(n[r].replace(A,""));q(y,e)}return y},v.require=vt,v.exports=mt,v.module=gt,v.isIE=function(){return n},v.Promise=function(){return G},v.Deferred=function(){return Y},G.resolve=Z,G.resolved=et,G.rejected=tt,G.when=nt,t.define=pt,t.require=dt})(this,/*@cc_on!@*/!1);
