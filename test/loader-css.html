<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test: loader/css</title>
    <script src="global.js"></script>
</head>
<body>
<div class="loader-css" style="display: none;">style.php loaded!</div>
<script>
    require.config({
        pathMap: {
            'loader': '../loader'
        }
    });
    asyncTest('load style.php', function(){
        require('loader/css!style.php', callback, resolved).always(always);
    });
    asyncTest('load non-existent.css', function(){
        require('loader/css!non-existent.css', rejected, fallback).always(always);
    });
    asyncTest('load jquery.com/reset.css', function(){
        require('loader/css!http://static.jquery.com/files/rocker/css/reset.css', callback, resolved).always(always);
    });
    asyncTest('load jquery.com/none.css', function(){
        require('loader/css!http://static.jquery.com/files/rocker/css/none.css', callback, fallback).always(always);
    });

    function rejected(){
        ok(false, 'load successfull!');
    }
    function resolved(reason){
        ok(false, reason);
    }
    function callback(exports){
        ok(true, 'load successfull!');
    }
    function fallback(reason){
        ok(true, reason);
    }
    function always(){
        start();
    }
</script>
</body>
</html>
